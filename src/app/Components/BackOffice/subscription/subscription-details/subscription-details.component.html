<div class="subscription-container">
  <div class="subscription-form card-glass">
    <h2>Create Your Subscription</h2>
    <form (ngSubmit)="onSubmit()" #subscriptionForm="ngForm">

      <div class="form-group">
        <label for="subscriptionType">Subscription Type</label>
        <select id="subscriptionType" [(ngModel)]="subscriptionType" name="subscriptionType" class="form-control" required #subscriptionTypeField="ngModel">
          <option value="" disabled selected>Select a type</option>
          <option value="BASIC">Basic</option>
          <option value="PREMIUM">Premium</option>
          <option value="GOLD">Gold</option>
        </select>
        <div *ngIf="subscriptionTypeField.invalid && subscriptionTypeField.touched" class="error-text">
          Please select a subscription type.
        </div>
      </div>

      <div class="form-group">
        <label for="subscriptionPrice">Price (TND)</label>
        <input type="number" id="subscriptionPrice" [(ngModel)]="subscriptionPrice" name="subscriptionPrice" class="form-control" placeholder="Enter price" required min="1" #subscriptionPriceField="ngModel">
        <div *ngIf="subscriptionPriceField.invalid && subscriptionPriceField.touched" class="error-text">
          Enter a valid price.
        </div>
      </div>

      <div class="form-group">
        <label for="subscriptionDescription">Description</label>
        <input type="text" id="subscriptionDescription" [(ngModel)]="subscriptionDescription" name="subscriptionDescription" class="form-control" placeholder="Enter description" required minlength="4" #subscriptionDescriptionField="ngModel">
        <div *ngIf="subscriptionDescriptionField.invalid && subscriptionDescriptionField.touched" class="error-text">
          Description must be at least 4 characters.
        </div>
      </div>

      <div class="form-group">
        <label for="durationInMonths">Duration (Months)</label>
        <input type="number" id="durationInMonths" [(ngModel)]="durationInMonths" name="durationInMonths" class="form-control" placeholder="Months" required min="1" #durationInMonthsField="ngModel">
        <div *ngIf="durationInMonthsField.invalid && durationInMonthsField.touched" class="error-text">
          Enter a valid duration.
        </div>
      </div>

      <button type="submit" class="btn-primary" [disabled]="!subscriptionForm.valid">
        <i class="fas fa-plus"></i> Create Subscription
      </button>
    </form>
  </div>

  <div class="subscription-list">
    <button (click)="toggleExistingSubscriptions()" class="btn-secondary">
      {{ showExistingSubscriptions ? 'Hide Subscriptions' : 'Show Subscriptions' }}
    </button>

    <div *ngIf="showExistingSubscriptions" class="subscription-cards">
      <div *ngFor="let sub of subscriptions" class="subscription-card">
        <div class="details">
          <h5>{{ sub.subscriptionType }}</h5>
          <p>{{ sub.subscriptionPrice }} TND</p>
          <p>{{ sub.subscriptionDescription }}</p>
          <p><i>{{ sub.durationInMonths }} months</i></p>
        </div>
        <div class="actions">
          <button (click)="editSubscription(sub)" class="btn-edit">
            <i class="fas fa-edit"></i>
          </button>
          <button (click)="deleteSubscription(sub.subscriptionId)" class="btn-delete">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
