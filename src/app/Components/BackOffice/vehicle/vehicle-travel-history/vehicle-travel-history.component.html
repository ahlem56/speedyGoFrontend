<div class="travel-history-container">
  <div class="header-section">
    <h1 class="title">Trip History</h1>
    <div class="controls">
      <div class="search-field">
        <input type="text" [(ngModel)]="searchTerm" (input)="applyFilters()" placeholder="Search by location...">
        <svg class="search-icon" viewBox="0 0 24 24">
          <path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </div>
    </div>
  </div>

  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Loading trips...</p>
  </div>

  <div class="error-state" *ngIf="errorMessage">
    ⚠️ {{ errorMessage }}
  </div>

  <div class="trip-list" *ngIf="!isLoading && !errorMessage">
    <div class="no-results" *ngIf="filteredTrips.length === 0">
      <svg viewBox="0 0 24 24" class="empty-icon">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-3.5h4v2h-4zm1-8.5c-.55 0-1 .45-1 1v4h2v-4c0-.55-.45-1-1-1z"/>
      </svg>
      <p>No trips found</p>
    </div>

    <div class="trip-item" *ngFor="let trip of filteredTrips">
      <div class="trip-info">
        <div class="location">
          <span class="departure">
            <svg class="pin" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            {{ trip.tripDeparture }}
          </span>
          <span class="spacer">→</span>
          <span class="destination">
            <svg class="pin" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            {{ trip.tripDestination }}
          </span>
        </div>
        <div class="trip-meta">
          <span class="date">{{ trip.tripDate | date: 'mediumDate' }}</span>
          <span class="status">{{ trip.reservationStatus }}</span>
        </div>
      </div>
      <div class="actions">
        <button class="delete-btn" (click)="deleteTrip(trip.tripId)">
          <svg viewBox="0 0 24 24">
            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
