<div class="profile-container">
  <div class="profile-header">
    <h2 class="profile-title">My Profile</h2>
  </div>

  <div class="profile-card">
    <div class="profile-photo-container">
      <img src="assets/FrontOffice/images/users/user4.jpg" alt="Profile Photo" class="profile-photo" />
      <input type="file" id="fileInput" (change)="onFileChange($event)" style="display: none" />
      <button (click)="triggerFileInput()" class="change-photo-btn">Change Photo</button>
    </div>

    <div class="profile-details">
      <div class="detail">
        <span class="label">First Name:</span>
        <span class="value">{{ user.firstName }}</span>
      </div>
      <div class="detail">
        <span class="label">Last Name:</span>
        <span class="value">{{ user.lastName }}</span>
      </div>
      <div class="detail">
        <span class="label">Email:</span>
        <span class="value">{{ user.email }}</span>
      </div>
      <div class="detail">
        <span class="label">Address:</span>
        <span class="value">{{ user.address }}</span>
      </div>
      <div class="detail">
        <span class="label">CIN:</span>
        <span class="value">{{ user.cin }}</span>
      </div>
      <div class="detail">
        <span class="label">Birth Date:</span>
        <span class="value">{{ user.birthDate | date }}</span>
      </div>
    </div>

    <div class="profile-actions">
      <button class="edit-btn">Edit Profile</button>
      <button class="change-password-btn">Change Password</button>
    </div>

    <!-- Trip History Section -->
    <div class="trip-history">
      <h3 class="toggle-trip-history" (click)="toggleTripHistory()">
        My Trip History
        <span *ngIf="isTripsVisible">▲</span>
        <span *ngIf="!isTripsVisible">▼</span>
      </h3>
      <div [ngClass]="{'trip-cards-container': true, 'open': isTripsVisible}">
        <div *ngFor="let trip of trips" class="trip-card">
          <div class="trip-details">
            <p><strong>Departure:</strong> {{ trip.tripDeparture }}</p>
            <p><strong>Destination:</strong> {{ trip.tripDestination }}</p>
            <p><strong>Date:</strong> {{ trip.tripDate | date }}</p>
            <p><strong>Price:</strong> ${{ trip.tripPrice }}</p>
            <p><strong>Status:</strong> <span [ngClass]="{'canceled': trip.reservationStatus === 'CANCELED'}">{{ trip.reservationStatus }}</span></p>
          </div>
          <button (click)="deleteTrip(trip.tripId)" class="cancel-trip-btn">Cancel Trip</button>
        </div>
      </div>
    </div>
 <!-- Carpool History Section -->
<div class="trip-history">
  <h3 class="toggle-trip-history" (click)="toggleCarpoolHistory()">
    My Carpool History
    <span *ngIf="isCarpoolVisible">▲</span>
    <span *ngIf="!isCarpoolVisible">▼</span>
  </h3>

  <div [ngClass]="{'carpool-cards-container': true, 'open': isCarpoolVisible}">
    <!-- Display carpool history as cards -->
    <div *ngFor="let offer of carpoolOffers" class="carpool-card">
      <div class="carpool-details">
        <p><strong>Departure:</strong> {{ offer.carpoolDeparture }}</p>
        <p><strong>Destination:</strong> {{ offer.carpoolDestination }}</p>
        <p><strong>Date:</strong> {{ offer.carpoolDate | date }}</p>
        <p><strong>Time:</strong> {{ offer.carpoolTime }}</p>
        <p><strong>Price:</strong> ${{ offer.carpoolPrice }}</p>
        <p>

        </p>
      </div>
    
      <!-- Afficher le bouton "Cancel Carpool" uniquement si le covoiturage n'est pas dans le passé -->
      <button
        *ngIf="!isCarpoolInPast(offer.carpoolDate, offer.carpoolTime)"
        (click)="cancelCarpool(offer.carpoolId)"
        class="cancel-carpool-btn"
      >
        Cancel Carpool
      </button>
    </div>
    <!-- Message if no carpool offers -->
    <p *ngIf="carpoolOffers.length === 0">No carpool history available.</p>
  </div>
</div>










  </div>
</div>
