<div class="profile-container">
  <div class="profile-header">
    <h2 class="profile-title">My Profile</h2>
  </div>

  <div class="profile-card">
    <div class="profile-photo-container">
      <img src="assets/FrontOffice/images/users/user4.jpg" alt="Profile Photo" class="profile-photo" />
      <input type="file" id="fileInput" (change)="onFileChange($event)" style="display: none" />
      <button (click)="triggerFileInput()" class="change-photo-btn">Change Photo</button>
    </div>

    <div class="profile-details">
      <div class="detail">
        <span class="label">First Name:</span>
        <span class="value">{{ user.firstName }}</span>
      </div>
      <div class="detail">
        <span class="label">Last Name:</span>
        <span class="value">{{ user.lastName }}</span>
      </div>
      <div class="detail">
        <span class="label">Email:</span>
        <span class="value">{{ user.email }}</span>
      </div>
      <div class="detail">
        <span class="label">Address:</span>
        <span class="value">{{ user.address }}</span>
      </div>
      <div class="detail">
        <span class="label">CIN:</span>
        <span class="value">{{ user.cin }}</span>
      </div>
      <div class="detail">
        <span class="label">Birth Date:</span>
        <span class="value">{{ user.birthDate | date }}</span>
      </div>
    </div>

    <div class="profile-actions">
      <button class="edit-btn">Edit Profile</button>
      <button class="change-password-btn">Change Password</button>
    </div>

    <!-- Trip History Section -->
    <div class="trip-history">
      <h3 class="toggle-trip-history" (click)="toggleTripHistory()">
        My Trip History
        <span *ngIf="isTripsVisible">▲</span>
        <span *ngIf="!isTripsVisible">▼</span>
      </h3>
      <div [ngClass]="{'trip-cards-container': true, 'open': isTripsVisible}">
        <div *ngFor="let trip of trips" class="trip-card">
          <div class="trip-details">
            <p><strong>Departure:</strong> {{ trip.tripDeparture }}</p>
            <p><strong>Destination:</strong> {{ trip.tripDestination }}</p>
            <p><strong>Date:</strong> {{ trip.tripDate | date }}</p>
            <p><strong>Price:</strong> ${{ trip.tripPrice }}</p>
            <p><strong>Status:</strong> <span [ngClass]="{'canceled': trip.reservationStatus === 'CANCELED'}">{{ trip.reservationStatus }}</span></p>
          </div>
          <button (click)="deleteTrip(trip.tripId)" class="cancel-trip-btn">Cancel Trip</button>
        </div>
      </div>
    </div>
        <!-- Parcel History Section -->
        <div class="parcel-history">
          <h3 class="toggle-parcel-history" (click)="toggleParcelHistory()">
            My Parcel History
            <span *ngIf="isParcelsVisible">▲</span>
            <span *ngIf="!isParcelsVisible">▼</span>
          </h3>
          <div [ngClass]="{'parcel-cards-container': true, 'open': isParcelsVisible}">
            <div *ngFor="let parcel of parcels" class="parcel-card">
              <div class="parcel-details">
                <p><strong>Departure:</strong> {{ parcel.parcelDeparture }}</p>
                <p><strong>Destination:</strong> {{ parcel.parcelDestination }}</p>
                <p><strong>Weight:</strong> {{ parcel.parcelWeight }} kg</p>
                <p><strong>Price:</strong> DT{{ parcel.parcelPrice }}</p>
              </div>
              <button (click)="deleteParcel(parcel.parcelId)" class="cancel-parcel-btn">Cancel Parcel</button>
            </div>
          </div>
        </div>
  </div>
</div>
